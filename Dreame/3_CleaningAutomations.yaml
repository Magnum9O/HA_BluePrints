blueprint:
  name: 🤖 Dreame Vacuum - Automazione Pulizie Avanzata
  description: |
    🚀 **SISTEMA INTELLIGENTE DI PULIZIE AUTOMATICHE**
    
    ✨ **CARATTERISTICHE:**
    - 🎯 **Slot Principale**: Mattina standard + Sera con logica adattiva
    - 📅 **4 Schedulazioni Aggiuntive**: Tutte con logica adattiva intelligente  
    - 🧠 **Controlli Automatici**: Verifica stato robot e presenza
    - 🔄 **Logica Adattiva Avanzata**: Evita pulizie ridondanti
    - 🏠 **Configurazione Flessibile**: Ogni slot indipendente
    
    📋 **COME FUNZIONA:**
    - Ogni slot può essere abilitato/disabilitato separatamente
    - Le pulizie serali si adattano in base alla situazione
    - Sistema ottimizzato per evitare sprechi energetici

  domain: automation
  input:
    # ═══════════════════════════════════════════════════════════════
    # 🔧 CONFIGURAZIONE BASE - ENTITÀ NECESSARIE
    # ═══════════════════════════════════════════════════════════════
    vacuum_entity:
      name: 🤖 Robot Aspirapolvere
      description: |
        **Seleziona l'entità principale del tuo robot Dreame**
        
        📍 **Dove trovarla:** Impostazioni → Dispositivi e servizi → Dreame → Cerca entità tipo `vacuum.nome_robot`
        
        ✅ **Esempi comuni:**
        - `vacuum.dreame_l10s_ultra`
        - `vacuum.ambrogio`  
        - `vacuum.dreame_robot_vacuum`
        
        ⚠️ **Importante:** Deve essere l'entità principale (domain: vacuum), NON i sensori!
      selector:
        entity:
          domain: vacuum

    robot_status_sensor:
      name: 📊 Sensore Stato Robot
      description: |
        **Sensore che riporta lo stato dettagliato del robot (idle, cleaning, returning, etc.)**
        
        📍 **Come trovarlo:** 
        1. Impostazioni → Dispositivi e servizi → Dreame
        2. Cerca un sensore con nome tipo `sensor.nome_robot_status` o `sensor.nome_robot_state`
        3. Gli stati comuni sono: `idle`, `cleaning`, `returning`, `charging`, `docked`, `paused`
        
        ✅ **Esempi:**
        - `sensor.dreame_l10s_ultra_status`
        - `sensor.ambrogio_status_2` 
        - `sensor.dreame_robot_vacuum_state`
        
        🎯 **A cosa serve:** Il blueprint controlla che il robot sia in uno stato valido (`idle`, `sleeping`, `charging`, `docked`) prima di avviare una pulizia
      selector:
        entity:
          domain: sensor

    presence_entity:
      name: 👥 Sensore di Presenza
      description: |
        **Entità che indica se qualcuno è presente in casa**
        
        🎯 **A COSA SERVE:** Il robot pulisce SOLO quando la casa è vuota (per sicurezza e comodità)
        
        📍 **Opzioni comuni:**
        
        **🏠 COUNTER (più semplice):**
        - `counter.away_home` (0 = casa vuota, 1+ = qualcuno presente)
        
        **👤 PERSON TRACKER:**
        - `person.nome_persona` (away = fuori, home = presente)
        
        **🏢 ZONE BASED:**
        - `input_select.house_mode` (away/home/night)
        - `binary_sensor.house_occupied`
        
        **📱 DEVICE TRACKER:**
        - `device_tracker.telefono` (away/home)
        
        ⚠️ **Nota:** Configura il "Valore Casa Vuota" nel campo successivo!
      selector:
        entity: {}

    presence_value:
      name: 🏠 Valore "Casa Vuota"  
      description: |
        **Il valore che indica che la casa è vuota**
        
        📍 **Esempi in base al sensore scelto:**
        
        **Se hai scelto un COUNTER:** `0`
        **Se hai scelto una PERSON:** `away` 
        **Se hai scelto un INPUT_SELECT:** `away`
        **Se hai scelto un BINARY_SENSOR:** `off`
        **Se hai scelto un DEVICE_TRACKER:** `not_home`
        
        💡 **Consiglio:** Guarda negli "Stati sviluppatori" il valore effettivo del tuo sensore quando sei fuori casa
      default: "0"
      selector:
        text: {}

    flag_cleaned_today:
      name: 🏁 Flag Pulizia Completata
      description: |
        **Input boolean che traccia se è già stato pulito oggi (necessario per logica adattiva)**
        
        🎯 **A COSA SERVE:**
        - Evita pulizie ridondanti nella stessa giornata
        - Permette alla logica adattiva di funzionare (salta/adatta le pulizie serali)
        - Si resetta automaticamente ogni giorno a mezzanotte
        
        📍 **COME CREARLO:**
        1. Impostazioni → Dispositivi e servizi → Helper
        2. Crea Helper → Toggle (Boolean)
        3. Nome: "Cleaned Today" o "Pulito Oggi"
        4. ID entità: `cleaned_today`
        
        ✅ **Risultato finale:** `input_boolean.cleaned_today`
        
        🔄 **AUTOMAZIONE RESET (OPZIONALE):**
        ```
        - id: reset_cleaned_today
          alias: Reset Flag Pulizia
          trigger:
            platform: time
            at: "00:00:00"
          action:
            service: input_boolean.turn_off
            target:
              entity_id: input_boolean.cleaned_today
        ```
      selector:
        entity:
          domain: input_boolean

    # ═══════════════════════════════════════════════════════════════
    # 🎯 SLOT PRINCIPALE - PULIZIE PRINCIPALI
    # ═══════════════════════════════════════════════════════════════

    # ────────────────────── MATTINA ──────────────────────
    main_morning_on:
      name: 🌅 SLOT PRINCIPALE - Mattina - Abilita
      description: |
        **Attiva la pulizia mattutina del programma principale**
        
        🎯 **COMPORTAMENTO:** Sempre eseguita quando abilitata (senza logica adattiva)
        💡 **Ideale per:** Pulizia quotidiana garantita prima che tutti si sveglino
      selector:
        boolean: {}

    main_morning_time:
      name: ⏰ SLOT PRINCIPALE - Mattina - Orario
      description: |
        **Orario per la pulizia mattutina del programma principale**
        
        💡 **Suggerimento:** Scegli un orario in cui sei sicuro che la casa sia vuota (es. molto presto)
        ⏰ **Default 05:00** per forzarti a cambiarlo secondo le tue esigenze
      default: "05:00:00"
      selector:
        time: {}

    main_morning_weekdays:
      name: 📅 SLOT PRINCIPALE - Mattina - Giorni
      description: |
        **Giorni della settimana in cui eseguire la pulizia mattutina**
        
        💡 **Esempi:**
        - Giorni lavorativi: Lunedì-Venerdì
        - Solo weekend: Sabato, Domenica  
        - Alternato: Lunedì, Mercoledì, Venerdì
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    main_morning_preset:
      name: 🎯 SLOT PRINCIPALE - Mattina - Modalità
      description: |
        **Modalità di pulizia per il programma mattutino**
        
        🎯 **MODALITÀ DISPONIBILI:**
        - **aspira**: Solo aspirazione (veloce)
        - **lava**: Solo lavaggio (con panno)  
        - **aspira_lava**: Aspira + lava (completo)
        - **cleangenius_deep**: AI cleaning profondo
        - **spot_cleaning**: Pulizia mirata
        - **custom**: Modalità personalizzata
        
        💡 **Suggerimento mattina:** `aspira` (veloce per non disturbare)
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    main_morning_rooms:
      name: 🏠 SLOT PRINCIPALE - Mattina - Stanze
      description: |
        **ID delle stanze da pulire (separate da virgole)**
        
        📍 **COME TROVARE GLI ID STANZE:**
        1. App Dreame → Mappa → Tocca una stanza → Guarda il numero
        2. Home Assistant → Stati sviluppatori → Cerca `sensor.nome_robot_room_mapping`
        
        ✅ **ESEMPI:**
        - `1,2,3` = Pulisce stanze 1, 2 e 3
        - `1` = Solo stanza 1 (es. cucina)
        - Lascia **vuoto** = Pulisce TUTTA la casa
        
        💡 **Suggerimento:** Mattina solo zone trafficate (cucina, soggiorno)
      default: ""
      selector:
        text: {}

    # ────────────────────── SERA ──────────────────────
    main_evening_on:
      name: 🌙 SLOT PRINCIPALE - Sera - Abilita
      description: |
        **Attiva la pulizia serale del programma principale**
        
        🧠 **COMPORTAMENTO:** Con logica adattiva configurabile (può adattarsi se già pulito)
        💡 **Ideale per:** Pulizia di completamento o alternativa alla mattina
      selector:
        boolean: {}

    main_evening_time:
      name: ⏰ SLOT PRINCIPALE - Sera - Orario
      description: |
        **Orario per la pulizia serale del programma principale**
        
        💡 **Suggerimento:** Dopo cena quando la casa si svuota
        ⏰ **Default 23:00** per forzarti a cambiarlo secondo le tue esigenze
      default: "23:00:00"
      selector:
        time: {}

    main_evening_weekdays:
      name: 📅 SLOT PRINCIPALE - Sera - Giorni
      description: |
        **Giorni della settimana in cui eseguire la pulizia serale**
        
        💡 **Strategia comune:** Giorni diversi dalla mattina per alternare
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    main_morning_preset:
      name: 🎯 SLOT PRINCIPALE - Mattina - Modalità
      description: Modalità di pulizia da utilizzare per il programma mattutino principale
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    main_morning_rooms:
      name: 🏠 SLOT PRINCIPALE - Mattina - Stanze
      description: "ID delle stanze da pulire separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    # ────────────────────── SERA ──────────────────────
    main_evening_on:
      name: 🌙 SLOT PRINCIPALE - Sera - Abilita
      description: Attiva la pulizia serale del programma principale (con logica adattiva configurabile)
      selector:
        boolean: {}

    main_evening_time:
      name: ⏰ SLOT PRINCIPALE - Sera - Orario
      description: Orario per la pulizia serale del programma principale
      default: "23:00:00"
      selector:
        time: {}

    main_evening_weekdays:
      name: 📅 SLOT PRINCIPALE - Sera - Giorni
      description: Giorni della settimana in cui eseguire la pulizia serale del programma principale
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    main_evening_conditional:
      name: 🧠 SLOT PRINCIPALE - Sera - Logica Adattiva
      description: |
        **Come comportarsi in base allo stato del flag pulizia:**
        
        - **🔄 Esegui sempre:** Ignora lo stato del flag e pulisce sempre con modalità principale
        - **⏭️ Salta se già pulito:** Non fa nulla se il flag indica che è già stato pulito oggi  
        - **🧠 Adatta modalità:** Se già pulito oggi, usa modalità e stanze alternative invece di quelle principali
      default: "always_clean"
      selector:
        select:
          options:
            - value: "always_clean"
              label: "🔄 Esegui Sempre"
            - value: "skip_if_cleaned"  
              label: "⏭️ Salta se già pulito"
            - value: "adapt_if_cleaned"
              label: "🧠 Adatta modalità"

    main_evening_preset:
      name: 🎯 SLOT PRINCIPALE - Sera - Modalità Principale
      description: Modalità di pulizia principale da utilizzare per il programma serale (usata sempre, tranne se logica adattiva sceglie modalità alternativa)
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    main_evening_rooms:
      name: 🏠 SLOT PRINCIPALE - Sera - Stanze Principali
      description: "ID delle stanze da pulire con modalità principale, separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    main_evening_fallback_preset:
      name: 🔄 SLOT PRINCIPALE - Sera - Modalità Alternativa
      description: Modalità di pulizia alternativa da usare quando la logica adattiva è impostata su "Adatta modalità" e il robot è già stato utilizzato oggi
      default: "lava"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    main_evening_fallback_rooms:
      name: 🏠 SLOT PRINCIPALE - Sera - Stanze Alternative
      description: "ID delle stanze da pulire con modalità alternativa (esempio: solo bagno = 3). Se vuoto, usa le stesse stanze principali"
      default: ""
      selector:
        text: {}

    # ═══════════════════════════════════════════════════════════════
    # 📋 PRIMA SCHEDULAZIONE AGGIUNTIVA
    # ═══════════════════════════════════════════════════════════════
    schedule1_on:
      name: 📋 Abilita Prima Schedulazione
      description: Attiva la prima schedulazione aggiuntiva con tutte le sue impostazioni (mattina e sera)
      selector:
        boolean: {}

    # ────────────────────── MATTINA ──────────────────────
    schedule1_morning_on:
      name: 🌅 PRIMA SCHEDULAZIONE - Mattina - Abilita
      description: Attiva la pulizia mattutina della prima schedulazione aggiuntiva
      selector:
        boolean: {}

    schedule1_morning_time:
      name: ⏰ PRIMA SCHEDULAZIONE - Mattina - Orario
      description: Orario per la pulizia mattutina della prima schedulazione aggiuntiva
      default: "05:00:00"
      selector:
        time: {}

    schedule1_morning_weekdays:
      name: 📅 PRIMA SCHEDULAZIONE - Mattina - Giorni
      description: Giorni della settimana per la pulizia mattutina della prima schedulazione aggiuntiva
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    schedule1_morning_preset:
      name: 🎯 PRIMA SCHEDULAZIONE - Mattina - Modalità
      description: Modalità di pulizia per il programma mattutino della prima schedulazione aggiuntiva
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule1_morning_rooms:
      name: 🏠 PRIMA SCHEDULAZIONE - Mattina - Stanze
      description: "ID delle stanze da pulire separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    # ────────────────────── SERA ──────────────────────
    schedule1_evening_on:
      name: 🌙 PRIMA SCHEDULAZIONE - Sera - Abilita
      description: Attiva la pulizia serale della prima schedulazione aggiuntiva (con logica adattiva)
      selector:
        boolean: {}

    schedule1_evening_time:
      name: ⏰ PRIMA SCHEDULAZIONE - Sera - Orario
      description: Orario per la pulizia serale della prima schedulazione aggiuntiva
      default: "23:00:00"
      selector:
        time: {}

    schedule1_evening_weekdays:
      name: 📅 PRIMA SCHEDULAZIONE - Sera - Giorni
      description: Giorni della settimana per la pulizia serale della prima schedulazione aggiuntiva
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    schedule1_evening_conditional:
      name: 🧠 PRIMA SCHEDULAZIONE - Sera - Logica Adattiva
      description: |
        **Come comportarsi in base allo stato del flag pulizia:**
        
        - **🔄 Esegui sempre:** Ignora lo stato del flag e pulisce sempre con modalità principale
        - **⏭️ Salta se già pulito:** Non fa nulla se il flag indica che è già stato pulito oggi  
        - **🧠 Adatta modalità:** Se già pulito oggi, usa modalità e stanze alternative invece di quelle principali
      default: "always_clean"
      selector:
        select:
          options:
            - value: "always_clean"
              label: "🔄 Esegui Sempre"
            - value: "skip_if_cleaned"
              label: "⏭️ Salta se già pulito"
            - value: "adapt_if_cleaned"
              label: "🧠 Adatta modalità"

    schedule1_evening_preset:
      name: 🎯 PRIMA SCHEDULAZIONE - Sera - Modalità Principale
      description: Modalità di pulizia principale per il programma serale della prima schedulazione aggiuntiva
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule1_evening_rooms:
      name: 🏠 PRIMA SCHEDULAZIONE - Sera - Stanze Principali
      description: "ID delle stanze da pulire con modalità principale, separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    schedule1_evening_fallback_preset:
      name: 🔄 PRIMA SCHEDULAZIONE - Sera - Modalità Alternativa
      description: Modalità di pulizia alternativa da usare quando la logica adattiva sceglie di adattare la modalità
      default: "lava"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule1_evening_fallback_rooms:
      name: 🏠 PRIMA SCHEDULAZIONE - Sera - Stanze Alternative
      description: "ID delle stanze da pulire con modalità alternativa (esempio: solo bagno = 3). Se vuoto, usa le stesse stanze principali"
      default: ""
      selector:
        text: {}

    # ═══════════════════════════════════════════════════════════════
    # 📋 SECONDA SCHEDULAZIONE AGGIUNTIVA
    # ═══════════════════════════════════════════════════════════════
    schedule2_on:
      name: 📋 Abilita Seconda Schedulazione
      description: Attiva la seconda schedulazione aggiuntiva con tutte le sue impostazioni (mattina e sera)
      selector:
        boolean: {}

    # ────────────────────── MATTINA ──────────────────────
    schedule2_morning_on:
      name: 🌅 SECONDA SCHEDULAZIONE - Mattina - Abilita
      description: Attiva la pulizia mattutina della seconda schedulazione aggiuntiva
      selector:
        boolean: {}

    schedule2_morning_time:
      name: ⏰ SECONDA SCHEDULAZIONE - Mattina - Orario
      description: Orario per la pulizia mattutina della seconda schedulazione aggiuntiva
      default: "05:00:00"
      selector:
        time: {}

    schedule2_morning_weekdays:
      name: 📅 SECONDA SCHEDULAZIONE - Mattina - Giorni
      description: Giorni della settimana per la pulizia mattutina della seconda schedulazione aggiuntiva
      default: ["domenica"]
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    schedule2_morning_preset:
      name: 🎯 SECONDA SCHEDULAZIONE - Mattina - Modalità
      description: Modalità di pulizia per il programma mattutino della seconda schedulazione aggiuntiva
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule2_morning_rooms:
      name: 🏠 SECONDA SCHEDULAZIONE - Mattina - Stanze
      description: "ID delle stanze da pulire separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    # ────────────────────── SERA ──────────────────────
    schedule2_evening_on:
      name: 🌙 SECONDA SCHEDULAZIONE - Sera - Abilita
      description: Attiva la pulizia serale della seconda schedulazione aggiuntiva (con logica adattiva)
      selector:
        boolean: {}

    schedule2_evening_time:
      name: ⏰ SECONDA SCHEDULAZIONE - Sera - Orario
      description: Orario per la pulizia serale della seconda schedulazione aggiuntiva
      default: "23:00:00"
      selector:
        time: {}

    schedule2_evening_weekdays:
      name: 📅 SECONDA SCHEDULAZIONE - Sera - Giorni
      description: Giorni della settimana per la pulizia serale della seconda schedulazione aggiuntiva
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    schedule2_evening_conditional:
      name: 🧠 SECONDA SCHEDULAZIONE - Sera - Logica Adattiva
      description: |
        **Come comportarsi in base allo stato del flag pulizia:**
        
        - **🔄 Esegui sempre:** Ignora lo stato del flag e pulisce sempre con modalità principale
        - **⏭️ Salta se già pulito:** Non fa nulla se il flag indica che è già stato pulito oggi  
        - **🧠 Adatta modalità:** Se già pulito oggi, usa modalità e stanze alternative invece di quelle principali
      default: "always_clean"
      selector:
        select:
          options:
            - value: "always_clean"
              label: "🔄 Esegui Sempre"
            - value: "skip_if_cleaned"
              label: "⏭️ Salta se già pulito"
            - value: "adapt_if_cleaned"
              label: "🧠 Adatta modalità"

    schedule2_evening_preset:
      name: 🎯 SECONDA SCHEDULAZIONE - Sera - Modalità Principale
      description: Modalità di pulizia principale per il programma serale della seconda schedulazione aggiuntiva
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule2_evening_rooms:
      name: 🏠 SECONDA SCHEDULAZIONE - Sera - Stanze Principali
      description: "ID delle stanze da pulire con modalità principale, separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    schedule2_evening_fallback_preset:
      name: 🔄 SECONDA SCHEDULAZIONE - Sera - Modalità Alternativa
      description: Modalità di pulizia alternativa da usare quando la logica adattiva sceglie di adattare la modalità
      default: "lava"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule2_evening_fallback_rooms:
      name: 🏠 SECONDA SCHEDULAZIONE - Sera - Stanze Alternative
      description: "ID delle stanze da pulire con modalità alternativa (esempio: solo bagno = 3). Se vuoto, usa le stesse stanze principali"
      default: ""
      selector:
        text: {}

    # ═══════════════════════════════════════════════════════════════
    # 📋 TERZA SCHEDULAZIONE AGGIUNTIVA
    # ═══════════════════════════════════════════════════════════════
    schedule3_on:
      name: 📋 Abilita Terza Schedulazione
      description: Attiva la terza schedulazione aggiuntiva con tutte le sue impostazioni (mattina e sera)
      selector:
        boolean: {}

    # ────────────────────── MATTINA ──────────────────────
    schedule3_morning_on:
      name: 🌅 TERZA SCHEDULAZIONE - Mattina - Abilita
      description: Attiva la pulizia mattutina della terza schedulazione aggiuntiva
      selector:
        boolean: {}

    schedule3_morning_time:
      name: ⏰ TERZA SCHEDULAZIONE - Mattina - Orario
      description: Orario per la pulizia mattutina della terza schedulazione aggiuntiva
      default: "05:00:00"
      selector:
        time: {}

    schedule3_morning_weekdays:
      name: 📅 TERZA SCHEDULAZIONE - Mattina - Giorni
      description: Giorni della settimana per la pulizia mattutina della terza schedulazione aggiuntiva
      default: ["sabato"]
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    schedule3_morning_preset:
      name: 🎯 TERZA SCHEDULAZIONE - Mattina - Modalità
      description: Modalità di pulizia per il programma mattutino della terza schedulazione aggiuntiva
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule3_morning_rooms:
      name: 🏠 TERZA SCHEDULAZIONE - Mattina - Stanze
      description: "ID delle stanze da pulire separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    # ────────────────────── SERA ──────────────────────
    schedule3_evening_on:
      name: 🌙 TERZA SCHEDULAZIONE - Sera - Abilita
      description: Attiva la pulizia serale della terza schedulazione aggiuntiva (con logica adattiva)
      selector:
        boolean: {}

    schedule3_evening_time:
      name: ⏰ TERZA SCHEDULAZIONE - Sera - Orario
      description: Orario per la pulizia serale della terza schedulazione aggiuntiva
      default: "23:00:00"
      selector:
        time: {}

    schedule3_evening_weekdays:
      name: 📅 TERZA SCHEDULAZIONE - Sera - Giorni
      description: Giorni della settimana per la pulizia serale della terza schedulazione aggiuntiva
      default: ["sabato"]
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    schedule3_evening_conditional:
      name: 🧠 TERZA SCHEDULAZIONE - Sera - Logica Adattiva
      description: |
        **Come comportarsi in base allo stato del flag pulizia:**
        
        - **🔄 Esegui sempre:** Ignora lo stato del flag e pulisce sempre con modalità principale
        - **⏭️ Salta se già pulito:** Non fa nulla se il flag indica che è già stato pulito oggi  
        - **🧠 Adatta modalità:** Se già pulito oggi, usa modalità e stanze alternative invece di quelle principali
      default: "always_clean"
      selector:
        select:
          options:
            - value: "always_clean"
              label: "🔄 Esegui Sempre"
            - value: "skip_if_cleaned"
              label: "⏭️ Salta se già pulito"
            - value: "adapt_if_cleaned"
              label: "🧠 Adatta modalità"

    schedule3_evening_preset:
      name: 🎯 TERZA SCHEDULAZIONE - Sera - Modalità Principale
      description: Modalità di pulizia principale per il programma serale della terza schedulazione aggiuntiva
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule3_evening_rooms:
      name: 🏠 TERZA SCHEDULAZIONE - Sera - Stanze Principali
      description: "ID delle stanze da pulire con modalità principale, separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    schedule3_evening_fallback_preset:
      name: 🔄 TERZA SCHEDULAZIONE - Sera - Modalità Alternativa
      description: Modalità di pulizia alternativa da usare quando la logica adattiva sceglie di adattare la modalità
      default: "lava"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule3_evening_fallback_rooms:
      name: 🏠 TERZA SCHEDULAZIONE - Sera - Stanze Alternative
      description: "ID delle stanze da pulire con modalità alternativa (esempio: solo bagno = 3). Se vuoto, usa le stesse stanze principali"
      default: ""
      selector:
        text: {}

    # ═══════════════════════════════════════════════════════════════
    # 📋 QUARTA SCHEDULAZIONE AGGIUNTIVA
    # ═══════════════════════════════════════════════════════════════
    schedule4_on:
      name: 📋 Abilita Quarta Schedulazione
      description: Attiva la quarta schedulazione aggiuntiva con tutte le sue impostazioni (mattina e sera)
      selector:
        boolean: {}

    # ────────────────────── MATTINA ──────────────────────
    schedule4_morning_on:
      name: 🌅 QUARTA SCHEDULAZIONE - Mattina - Abilita
      description: Attiva la pulizia mattutina della quarta schedulazione aggiuntiva
      selector:
        boolean: {}

    schedule4_morning_time:
      name: ⏰ QUARTA SCHEDULAZIONE - Mattina - Orario
      description: Orario per la pulizia mattutina della quarta schedulazione aggiuntiva
      default: "05:00:00"
      selector:
        time: {}

    schedule4_morning_weekdays:
      name: 📅 QUARTA SCHEDULAZIONE - Mattina - Giorni
      description: Giorni della settimana per la pulizia mattutina della quarta schedulazione aggiuntiva
      default: ["domenica"]
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    schedule4_morning_preset:
      name: 🎯 QUARTA SCHEDULAZIONE - Mattina - Modalità
      description: Modalità di pulizia per il programma mattutino della quarta schedulazione aggiuntiva
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule4_morning_rooms:
      name: 🏠 QUARTA SCHEDULAZIONE - Mattina - Stanze
      description: "ID delle stanze da pulire separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    # ────────────────────── SERA ──────────────────────
    schedule4_evening_on:
      name: 🌙 QUARTA SCHEDULAZIONE - Sera - Abilita
      description: Attiva la pulizia serale della quarta schedulazione aggiuntiva (con logica adattiva)
      selector:
        boolean: {}

    schedule4_evening_time:
      name: ⏰ QUARTA SCHEDULAZIONE - Sera - Orario
      description: Orario per la pulizia serale della quarta schedulazione aggiuntiva
      default: "23:00:00"
      selector:
        time: {}

    schedule4_evening_weekdays:
      name: 📅 QUARTA SCHEDULAZIONE - Sera - Giorni
      description: Giorni della settimana per la pulizia serale della quarta schedulazione aggiuntiva
      default: ["domenica"]
      selector:
        select:
          multiple: true
          mode: dropdown
          options:
            - lunedì
            - martedì
            - mercoledì
            - giovedì
            - venerdì
            - sabato
            - domenica

    schedule4_evening_conditional:
      name: 🧠 QUARTA SCHEDULAZIONE - Sera - Logica Adattiva
      description: |
        **Come comportarsi in base allo stato del flag pulizia:**
        
        - **🔄 Esegui sempre:** Ignora lo stato del flag e pulisce sempre con modalità principale
        - **⏭️ Salta se già pulito:** Non fa nulla se il flag indica che è già stato pulito oggi  
        - **🧠 Adatta modalità:** Se già pulito oggi, usa modalità e stanze alternative invece di quelle principali
      default: "always_clean"
      selector:
        select:
          options:
            - value: "always_clean"
              label: "🔄 Esegui Sempre"
            - value: "skip_if_cleaned"
              label: "⏭️ Salta se già pulito"
            - value: "adapt_if_cleaned"
              label: "🧠 Adatta modalità"

    schedule4_evening_preset:
      name: 🎯 QUARTA SCHEDULAZIONE - Sera - Modalità Principale
      description: Modalità di pulizia principale per il programma serale della quarta schedulazione aggiuntiva
      default: "aspira"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule4_evening_rooms:
      name: 🏠 QUARTA SCHEDULAZIONE - Sera - Stanze Principali
      description: "ID delle stanze da pulire con modalità principale, separate da virgole (esempio: 1,2,3) oppure lascia vuoto per pulire tutta la casa"
      default: ""
      selector:
        text: {}

    schedule4_evening_fallback_preset:
      name: 🔄 QUARTA SCHEDULAZIONE - Sera - Modalità Alternativa
      description: Modalità di pulizia alternativa da usare quando la logica adattiva sceglie di adattare la modalità
      default: "lava"
      selector:
        select:
          options:
            - aspira
            - lava
            - aspira_lava
            - cleangenius_deep
            - spot_cleaning
            - custom

    schedule4_evening_fallback_rooms:
      name: 🏠 QUARTA SCHEDULAZIONE - Sera - Stanze Alternative
      description: "ID delle stanze da pulire con modalità alternativa (esempio: solo bagno = 3). Se vuoto, usa le stesse stanze principali"
      default: ""
      selector:
        text: {}
